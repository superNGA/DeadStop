//=========================================================================
//                      LegacyPrefix_t
//=========================================================================
// by      : INSANE
// created : 07/12/2025
//
// purpose : Holds upto 4 Legacy Prefix
//-------------------------------------------------------------------------
#pragma once
#include "../../Definitions.h"
#include "../DecoderRules.h"


///////////////////////////////////////////////////////////////////////////
namespace Decoder::Inst
{

struct LegacyPrefix_t
{
    LegacyPrefix_t() : m_nBytes(0) {}


    ///////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////
    inline bool CanStorePrefix()
    {
        return m_nBytes < MAX_LEGACY_PREFIX;
    }


    ///////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////
    inline bool PushPrefix(Byte iPrefix)
    {
        if(CanStorePrefix() == false)
            return false;

        
        m_iBytes[m_nBytes] = iPrefix;
        m_nBytes++;
        return true;
    }


    ///////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////
    inline int PrefixCount()
    {
        return m_nBytes;
    }


    ///////////////////////////////////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////
    inline void Clear()
    {
        m_nBytes = 0;
    }


    int  m_nBytes = 0;
    Byte m_iBytes[4];
};

}
///////////////////////////////////////////////////////////////////////////
